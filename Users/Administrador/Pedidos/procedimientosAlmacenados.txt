DELIMITER //
    CREATE PROCEDURE procesar_venta(id_usuario int, id_cliente int)
	BEGIN
	    DECLARE idPedido INT;
	    DECLARE registros INT;

	    DECLARE total DECIMAL(10,2);


	    CREATE TEMPORARY TABLE tbl_tmp(
	        id BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
	        id_producto BIGINT,
	        cantprod int;
	    )
	    SET registros = (SELECT COUNT(*) FROM detalle_pedido_temp);

	    IF registros > 0 THEN
	        INSERT INTO tbl_tmp(id_producto,cantprod) SELECT id_producto, cantprod FROM detalle_pedido_temp;
	        SET idPedido = LAST_INSERT_ID();
            INSERT INTO detalle_pedido(id_pedido, id_producto, cantprod, subtotal) SELECT (idPedido) as id_pedido, id_producto, cantprod, subtotal FROM detalle_pedido_temp;


	    ELSE



    END;//
DELIMITER ;



